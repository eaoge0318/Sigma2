# EXPERT_RULES 簡化 - 完成

## ✅ 修改完成!

### 問題

原本的 `EXPERT_RULES` 包含**具體的造紙製程知識**:
- 噴網速比 (Jet-to-wire Ratio)
- 漿門開度 (Slice Opening)
- 烘缸蒸汽壓力
- 等等...

這導致 LLM 會嘗試將**任何參數名稱**對應到這些知識,產生不準確的推測。

### 解決方案:選項 C - 一般性指導原則

將 `domain_knowledge.py` 中的 `EXPERT_RULES` 改為**一般性分析原則**,不涉及具體參數名稱。

### 新的 EXPERT_RULES 內容

```python
EXPERT_RULES = """
[製程穩定性分析原則]

1. **數據趨勢分析**
   - 關注持續性變化,而非單點波動
   - 識別週期性模式和異常值
   - 優先處理影響最大的變化因子

2. **參數調整策略**
   - 避免同時調整多個參數
   - 小幅度漸進式調整
   - 記錄調整歷史

3. **問題診斷順序**
   - 確認測量系統正常
   - 檢查上游參數穩定性
   - 分析下游影響
   - 考慮外部因素

4. **操作建議原則**
   - 基於數據分析結果
   - 提供可量化的調整方向
   - 說明預期效果
   - 建議監控週期

5. **風險評估**
   - 評估緊急程度
   - 判斷是否需要立即介入
   - 考慮副作用
   - 建議備用方案
"""
```

---

## 效果對比

### 修改前 ❌
```
LLM 看到 "BCDRY-DCS_A472" → 
猜測是 "烘缸蒸汽壓力" → 
解釋 "乾燥不均勻,影響乾燥效率"
```

### 修改後 ✅
```
LLM 看到 "BCDRY-DCS_A472" → 
無法對應到具體知識 → 
只報告 "參數 BCDRY-DCS_A472 下降" → 
根據一般性原則給建議 "建議關注此參數變化"
```

---

## 優點

✅ **不會對未知參數做推測** - 避免錯誤解釋
✅ **保留分析框架** - 仍然提供有價值的指導
✅ **適用於任何製程** - 不限於造紙業
✅ **客觀且可靠** - 基於數據,不是猜測

---

## 配合 llm_reporter.py 的修改

之前在 `llm_reporter.py` 中加入的提醒仍然有效:

```python
**重要提醒**:
- 對於無法明確對應到領域知識的參數,請只報告其變化方向和數值
- 避免使用未經確認的解釋
- 如果不確定參數意義,請使用"參數 XXX 上升/下降"的客觀描述
```

---

## 測試步驟

1. **重新啟動後端** (修改會自動載入)
2. **執行模擬**
3. **點擊 "Generate Report"**
4. **檢查 AI 報告**:
   - 應該只報告參數變化
   - 應該使用一般性原則給建議
   - 不應該出現"乾燥效率"、"纖維分佈"等推測

---

## 🎯 完成!

**EXPERT_RULES 現在是一般性原則,不會導致 LLM 過度推測!** 🎊

**LLM 會:**
- ✅ 客觀報告數據變化
- ✅ 使用一般性原則分析
- ✅ 給出可操作的建議
- ❌ 不對未知參數做臆測
