# LLM Prompt 修改 - 更謹慎的參數解釋

## ✅ 修改完成!

### 問題

LLM 對未知參數(如 `BCDRY-DCS_A472`)做出過度解釋:
- ❌ "乾燥不均勻: BCDRY-DCS_A472 下降，影響乾燥效率"
- ❌ "纖維分佈: MEDIC-DCS_A1005 上升，可能導致纖維定向不均"

這些解釋是 LLM 根據參數名稱**猜測**的,不一定正確。

### 修改內容

在 `llm_reporter.py` 的 `generate_report()` 方法中加入了兩處明確指示:

#### 1. 在 EXPERT_RULES 後加入重要提醒 (第 46-50 行)

```python
**重要提醒**:
- 上述領域知識僅供參考,實際參數名稱和意義以現場定義為準
- 對於無法明確對應到領域知識的參數(如 BCDRY-DCS_A472),請**只報告其變化方向和數值**,不要推測其具體意義
- 避免使用"乾燥效率"、"纖維分佈"等未經確認的解釋
- 如果不確定參數意義,請使用"參數 XXX 上升/下降"的客觀描述
```

#### 2. 在回答準則中明確要求 (第 74-77 行)

```python
**回答準則**:
- 對於明確對應到領域知識的參數(如噴網速比、漿門開度),可以使用專業術語解釋
- 對於無法對應的參數代碼(如 BCDRY-DCS_A472),只報告"參數 BCDRY-DCS_A472 下降",不要臆測其意義
- 注意：請一律使用 {measure_name} 稱呼測量值
```

---

## 預期效果

### 修改前 ❌
```
波動核心原因:
- 乾燥不均勻: BCDRY-DCS_A472 下降，影響乾燥效率
- 纖維分佈: MEDIC-DCS_A1005 上升，可能導致纖維定向不均
```

### 修改後 ✅
```
波動核心原因:
- 參數 BCDRY-DCS_A472 下降
- 參數 MEDIC-DCS_A1005 上升
- (如果參數名稱明確對應到領域知識,才會使用專業術語解釋)
```

---

## 保留的功能

✅ **EXPERT_RULES 仍然保留** - 用於已知參數的解釋
✅ **領域知識仍然有效** - 對於明確對應的參數(如噴網速比、漿門開度)
✅ **SHAP 分析正常** - 仍然會報告影響因子

---

## 測試步驟

1. **重新啟動後端** (如果 httpx 已安裝)
2. **執行模擬**
3. **點擊 "Generate Report"**
4. **檢查 AI 報告**:
   - 對於未知參數,應該只報告變化
   - 對於已知參數,可以使用專業術語

---

## 🎯 目標達成!

LLM 現在會:
- ✅ 對已知參數使用領域知識
- ✅ 對未知參數只報告變化,不推測
- ✅ 更謹慎,更客觀

**領域知識保留,但不會過度解釋!** 🎊
