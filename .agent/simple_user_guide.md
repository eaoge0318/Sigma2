# 即時看板使用步驟 - 簡易版

## 🎯 目標
讓即時看板正常運作，進行模擬預測

## ✅ 正確操作順序

### 步驟 1：打開即時看板頁面
在瀏覽器地址欄輸入：
```
http://10.10.20.109:8001/dashboard
```

### 步驟 2：選擇檔案 ⭐ 重要
1. 找到頁面上方的 **SIMULATOR:** 區域
2. 第一個下拉選單（檔案選擇）
3. 點擊下拉選單，選擇一個 CSV 檔案
4. **等待彈出提示**：「✅ 已載入模擬檔案: xxx.csv (N 筆數據)」
5. **如果沒有彈出提示** → 表示載入失敗，不要繼續下一步！

### 步驟 3：選擇模型
1. 第二個下拉選單（模型選擇）
2. 點擊下拉選單，選擇一個模型
   - 格式：`Model_XXX | R2: 0.xxxx | 2026/02/03 xx:xx:xx`
3. **等待彈出提示**：「✅ 模型載入成功！請點擊 Run Simulation...」
4. **如果沒有彈出提示** → 表示載入失敗

### 步驟 4：運行模擬
點擊紫色按鈕：**🚀 Run Simulation (api_tester)**

### 步驟 5：查看結果
- 即時看板應該會更新數據
- 推理日誌應該會顯示建議
- 如果出現 400 錯誤 → 返回步驟 2

## ❌ 如果遇到 400 錯誤

**原因**: 檔案沒有正確載入到系統

**解決方法**:
1. 重新整理頁面（F5）
2. 重新選擇檔案（步驟 2）
3. **確認看到「已載入模擬檔案」的彈出提示**
4. 重新選擇模型（步驟 3）
5. 再次運行模擬（步驟 4）

## 🔍 檢查後端日誌（如果問題持續）

在**執行後端的終端視窗**中查看：

### 當您選擇檔案時，應該看到：
```
INFO: Session Mantle 載入模擬檔案: KL00_0411_ALL_4.csv (244 rows)
```

### 當您選擇模型時，應該看到：
```
✅ RL Model: Loaded config job_7ba3af9e.json pointing to workspace\Mantle\bundles\rl_run_...
✅ Prediction Model: Using run_path from config: workspace\Mantle\bundles\pred_run_...
AgenticReasoning: Session Mantle models reloaded successfully
  - RL Model: workspace\Mantle\bundles\rl_run_20260203_233740\policy_bundle
  - Prediction Model Dir: workspace\Mantle\bundles\pred_run_20260203_233911
```

### 如果沒有看到這些訊息
→ 表示前端的載入請求沒有送達後端
→ 可能是網絡問題或瀏覽器快取問題
→ 解決方法：強制重新整理 (Ctrl + F5)

## 📸 預期畫面

### 選擇檔案後
會彈出這個提示框：
```
┌─────────────────────────────────┐
│  ✅ 已載入模擬檔案:              │
│  KL00_0411_ALL_4.csv            │
│  (244 筆數據)                    │
│                                 │
│            [確定]                │
└─────────────────────────────────┘
```

### 選擇模型後
會彈出這個提示框：
```
┌─────────────────────────────────┐
│  ✅ 模型載入成功！               │
│  請點擊 Run Simulation 或        │
│  Auto Play 開始。                │
│                                 │
│            [確定]                │
└─────────────────────────────────┘
```

## 🚨 常見錯誤

### 錯誤 1: 沒有彈出「已載入」提示
**原因**: JavaScript 模組還沒初始化完成
**解決**: 等待 2-3 秒後再選擇檔案

### 錯誤 2: 400 Bad Request
**原因**: 檔案沒有載入到 session
**解決**: 
1. 檢查是否看到「已載入模擬檔案」的提示
2. 如果沒有，重新選擇檔案
3. 確保看到提示後再運行模擬

### 錯誤 3: 模型列表是空的
**原因**: 沒有訓練過的模型
**解決**: 先到「模型訓練」頁面訓練一個模型

## 📝 完整操作流程總結

```
打開頁面
   ↓
等待 2-3 秒（讓頁面載入完成）
   ↓
選擇檔案 → 看到「✅ 已載入模擬檔案」提示
   ↓
選擇模型 → 看到「✅ 模型載入成功」提示
   ↓
點擊 Run Simulation
   ↓
看到即時看板更新 ✅
```

## 💬 如果還是不行

請告訴我：
1. 選擇檔案後，有看到彈出提示嗎？（有/沒有）
2. 選擇模型後，有看到彈出提示嗎？（有/沒有）
3. 後端終端有看到「載入模擬檔案」的訊息嗎？（有/沒有）
4. 後端終端有看到「RL Model: Loaded」的訊息嗎？（有/沒有）

這樣我就能知道問題卡在哪個步驟了！
