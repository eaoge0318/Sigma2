# æ™ºèƒ½åˆ†æåŠŸèƒ½ - æ¨¡å—åŒ–å®ä½œè®¡åˆ’ (v2.0)

> **æ›´æ–°è¯´æ˜**: åŸºäºå•æ–‡ä»¶ä¸è¶…è¿‡350è¡Œçš„åŸåˆ™ï¼Œé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„é‡æ–°è®¾è®¡

## ğŸ“š æ–‡æ¡£å¯¼èˆª

## ğŸ“š æ–‡æ¡£å¯¼èˆª

æœ¬ç›®å½•åŒ…å«æ™ºèƒ½åˆ†æåŠŸèƒ½çš„å®Œæ•´è§„åˆ’æ–‡æ¡£ï¼š

1. **[README.md](./README.md)** (æœ¬æ–‡æ¡£) - æ€»è§ˆä¸æ¶æ„
2. **[01_architecture.md](./01_architecture.md)** - è¯¦ç»†æ¶æ„è®¾è®¡
3. **[02_backend_modules.md](./02_backend_modules.md)** - åç«¯æ¨¡å—å®ç°
4. **[03_api_design.md](./03_api_design.md)** - APIæ¥å£è®¾è®¡
5. **[04_frontend.md](./04_frontend.md)** - å‰ç«¯å®ç°
6. **[05_implementation_steps.md](./05_implementation_steps.md)** - åˆ†é˜¶æ®µå®ä½œæ­¥éª¤
7. **[task.md](./task.md)** - ä»»åŠ¡è¿½è¸ªæ¸…å•

---

## ğŸ¯ æ ¸å¿ƒç›®æ ‡

æ„å»ºåŸºäºæœ¬åœ° Ollama RAG çš„æ™ºèƒ½æ•°æ®åˆ†æç³»ç»Ÿï¼Œè®©ç”¨æˆ·èƒ½ç”¨è‡ªç„¶è¯­è¨€åˆ†æ CSV æ•°æ®ã€‚

---

## ğŸ—ï¸ æ¨¡å—åŒ–æ¶æ„

### è®¾è®¡åŸåˆ™

âœ… **å•æ–‡ä»¶ä¸è¶…è¿‡350è¡Œ**  
âœ… **èŒè´£å•ä¸€ï¼Œæ˜“äºç»´æŠ¤**  
âœ… **æ¨¡å—ç‹¬ç«‹ï¼Œä¾¿äºæµ‹è¯•**  
âœ… **æŒ‰éœ€åŠ è½½ï¼Œçµæ´»æ‰©å±•**

### ç›®å½•ç»“æ„

```
Sigma2/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ analysis/                    â† æ™ºèƒ½åˆ†ææœåŠ¡ç›®å½•
â”‚   â”‚       â”œâ”€â”€ __init__.py             (  20è¡Œ) å¯¼å‡ºæ¥å£
â”‚   â”‚       â”œâ”€â”€ analysis_service.py     ( 350è¡Œ) ç´¢å¼•ä¸æ•°æ®å¤„ç†
â”‚   â”‚       â”œâ”€â”€ agent.py                ( 250è¡Œ) LLM Agent
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ tools/                   â† åˆ†æå·¥å…·æ¨¡å—
â”‚   â”‚           â”œâ”€â”€ __init__.py         (  30è¡Œ) å·¥å…·å¯¼å‡º
â”‚   â”‚           â”œâ”€â”€ base.py             (  50è¡Œ) å·¥å…·åŸºç±»
â”‚   â”‚           â”œâ”€â”€ data_query.py       ( 200è¡Œ) 5ä¸ªæŸ¥è¯¢å·¥å…·
â”‚   â”‚           â”œâ”€â”€ statistics.py       ( 250è¡Œ) 6ä¸ªç»Ÿè®¡å·¥å…·
â”‚   â”‚           â”œâ”€â”€ patterns.py         ( 200è¡Œ) 4ä¸ªæ¨¡å¼å·¥å…·
â”‚   â”‚           â”œâ”€â”€ helpers.py          ( 100è¡Œ) 3ä¸ªè¾…åŠ©å·¥å…·
â”‚   â”‚           â””â”€â”€ executor.py         ( 100è¡Œ) å·¥å…·æ‰§è¡Œå™¨
â”‚   â”‚
â”‚   â””â”€â”€ routers/
â”‚       â””â”€â”€ analysis_router.py          ( 200è¡Œ) APIè·¯ç”±
â”‚
â”œâ”€â”€ static/js/
â”‚   â””â”€â”€ intelligent_analysis.js         ( 450è¡Œ) å‰ç«¯äº¤äº’
â”‚
â””â”€â”€ ai_agent/                            â† è§„åˆ’æ–‡æ¡£ç›®å½•
    â”œâ”€â”€ README.md                        (æœ¬æ–‡æ¡£)
    â”œâ”€â”€ 01-05_*.md                       (è¯¦ç»†è®¾è®¡)
    â”œâ”€â”€ task.md                          (ä»»åŠ¡æ¸…å•)
    â””â”€â”€ his/                             (å†å²ç‰ˆæœ¬å½’æ¡£)
```

---

## ğŸ“Š æ–‡ä»¶å¤§å°ç»Ÿè®¡

### åç«¯ Python (10ä¸ªæ–‡ä»¶)

| æ–‡ä»¶ | å¤§å° | è¯´æ˜ |
|------|------|------|
| `analysis/__init__.py` | 20è¡Œ | âœ… è½»é‡çº§ |
| `analysis/analysis_service.py` | 350è¡Œ | âœ… åˆšå¥½ä¸Šé™ |
| `analysis/agent.py` | 250è¡Œ | âœ… é€‚ä¸­ |
| `tools/__init__.py` | 30è¡Œ | âœ… è½»é‡çº§ |
| `tools/base.py` | 50è¡Œ | âœ… è½»é‡çº§ |
| `tools/data_query.py` | 200è¡Œ | âœ… é€‚ä¸­ |
| `tools/statistics.py` | 250è¡Œ | âœ… é€‚ä¸­ |
| `tools/patterns.py` | 200è¡Œ | âœ… é€‚ä¸­ |
| `tools/helpers.py` | 100è¡Œ | âœ… è½»é‡çº§ |
| `tools/executor.py` | 100è¡Œ | âœ… è½»é‡çº§ |
| **æ€»è®¡** | **1,550è¡Œ** | **å•æ–‡ä»¶æœ€å¤§350è¡Œ** |

### å‰ç«¯ (1ä¸ªæ–‡ä»¶ æˆ– å¯é€‰æ‹†åˆ†)

| é€‰é¡¹ | æ–‡ä»¶æ•° | è¯´æ˜ |
|------|--------|------|
| å•æ–‡ä»¶ç‰ˆ | 1ä¸ª (450è¡Œ) | é€‚ä¸­ï¼Œæ¨è |
| æ¨¡å—åŒ–ç‰ˆ | 4ä¸ª (å„100-150è¡Œ) | å¯é€‰ |

---

## ğŸ”§ 18ä¸ªåˆ†æå·¥å…·

### æ•°æ®æŸ¥è¯¢ (5ä¸ª) - `data_query.py`
1. `get_parameter_list` - å‚æ•°åˆ—è¡¨
2. `get_parameter_statistics` - å‚æ•°ç»Ÿè®¡
3. `get_data_overview` - æ•°æ®æ€»è§ˆ
4. `search_parameters_by_concept` - æ¦‚å¿µæœç´¢
5. `get_time_series_data` - æ—¶åºæ•°æ®

### ç»Ÿè®¡åˆ†æ (6ä¸ª) - `statistics.py`
6. `calculate_correlation` - ç›¸å…³æ€§
7. `get_top_correlations` - Topç›¸å…³
8. `compare_groups` - ç»„é—´æ¯”è¾ƒ
9. `detect_outliers` - å¼‚å¸¸æ£€æµ‹
10. `analyze_distribution` - åˆ†å¸ƒåˆ†æ
11. `perform_regression` - å›å½’åˆ†æ

### æ¨¡å¼å‘ç° (4ä¸ª) - `patterns.py`
12. `find_temporal_patterns` - æ—¶åºæ¨¡å¼
13. `find_event_patterns` - äº‹ä»¶æ¨¡å¼
14. `cluster_analysis` - èšç±»åˆ†æ
15. `find_association_rules` - å…³è”è§„åˆ™

### å¯¹è¯è¾…åŠ© (3ä¸ª) - `helpers.py`
16. `explain_result` - ç»“æœè§£é‡Š
17. `suggest_next_analysis` - æ¨èåˆ†æ
18. `ask_clarification` - è¯¢é—®æ¾„æ¸…

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### MVP ç‰ˆæœ¬ (5-6å¤©)

**é˜¶æ®µä¸€ï¼šæ ¸å¿ƒå·¥å…·** (2å¤©)
```bash
# åˆ›å»ºåŸºç¡€ç»“æ„
backend/services/analysis/__init__.py
backend/services/analysis/analysis_service.py
backend/services/analysis/tools/base.py

# å®ç°6ä¸ªæ ¸å¿ƒå·¥å…·
backend/services/analysis/tools/data_query.py  (3ä¸ªå·¥å…·)
backend/services/analysis/tools/statistics.py  (3ä¸ªå·¥å…·)
```

**é˜¶æ®µäºŒï¼šAgent + API** (2å¤©)
```bash
backend/services/analysis/agent.py
backend/services/analysis/tools/executor.py
backend/routers/analysis_router.py
```

**é˜¶æ®µä¸‰ï¼šå‰ç«¯** (1-2å¤©)
```bash
static/js/intelligent_analysis.js
dashboard.html (ä¿®æ”¹)
```

### å®Œæ•´ç‰ˆæœ¬ (+2-3å¤©)

å¢åŠ å‰©ä½™12ä¸ªå·¥å…·å’Œä¼˜åŒ–

---

## âœ… æ¨¡å—åŒ–ä¼˜åŠ¿

### 1. æ˜“äºå¼€å‘
- å›¢é˜Ÿå¯å¹¶è¡Œå¼€å‘ä¸åŒå·¥å…·**ç”¨æˆ·æé—®ç¤ºä¾‹**ï¼š
- "æœ‰å“ªäº›å­—æ®µï¼Ÿ"
- "ä»·æ ¼ç›¸å…³çš„å­—æ®µæœ‰å“ªäº›ï¼Ÿ"
- "å½±å“å› ç´ æœ‰å“ªäº›ï¼Ÿ"
- "å“ªäº›å› ç´ ç›¸å…³æ€§æœ€å¼ºï¼Ÿ"
- "åˆ†æå­—æ®µä¹‹é—´çš„ç›¸å…³æ€§"æ–‡ä»¶å°ï¼Œå®¹æ˜“ç†è§£
- Bugå®šä½å¿«é€Ÿ

### 3. æ˜“äºæµ‹è¯•
- æ¯ä¸ªæ¨¡å—ç‹¬ç«‹æµ‹è¯•
- Mock ä¾èµ–ç®€å•
- æµ‹è¯•è¦†ç›–ç‡é«˜

### 4. æ˜“äºæ‰©å±•
- æ–°å¢å·¥å…·åªéœ€æ–°å»ºç±»
- ä¸éœ€è¦ä¿®æ”¹ç°æœ‰ä»£ç 
- éµå¾ªå¼€é—­åŸåˆ™

---

## ğŸ“ˆ å®ä½œæ—¶é—´ä¼°ç®—

| é˜¶æ®µ | å·¥ä½œæ—¥ | å†…å®¹ |
|------|--------|------|
| åç«¯æ ¸å¿ƒ | 3-4å¤© | åŸºç¡€æœåŠ¡ + 6ä¸ªæ ¸å¿ƒå·¥å…· |
| Agent + API | 1-2å¤© | LLMæ•´åˆ + è·¯ç”± |
| å‰ç«¯ | 2å¤© | UI + äº¤äº’é€»è¾‘ |
| æµ‹è¯•ä¼˜åŒ– | 1-2å¤© | é›†æˆæµ‹è¯• + ä¼˜åŒ– |
| **æ€»è®¡** | **7-10å¤©** | MVP åˆ°å®Œæ•´ç‰ˆ |

---

## ï¿½ åç»­é˜…è¯»

1. **[01_architecture.md](./01_architecture.md)** - æ·±å…¥äº†è§£æ¶æ„è®¾è®¡
2. **[02_backend_modules.md](./02_backend_modules.md)** - æŸ¥çœ‹ä»£ç å®ç°ç»†èŠ‚
3. **[05_implementation_steps.md](./05_implementation_steps.md)** - å¼€å§‹å®ä½œ

---

## ğŸ’¡ ä¸æ—§ç‰ˆæœ¬çš„å·®å¼‚

| é¡¹ç›® | æ—§ç‰ˆ (v1.0) | æ–°ç‰ˆ (v2.0) |
|------|------------|------------|
| æœ€å¤§å•æ–‡ä»¶ | 900è¡Œ | **350è¡Œ** âœ… |
| å·¥å…·ç»„ç»‡ | 1ä¸ªå¤§æ–‡ä»¶ | **4ä¸ªæ¨¡å—æ–‡ä»¶** âœ… |
| å¯ç»´æŠ¤æ€§ | ä¸­ç­‰ | **é«˜** âœ… |
| æµ‹è¯•éš¾åº¦ | è¾ƒé«˜ | **ä½** âœ… |

æ—§ç‰ˆæœ¬å·²å½’æ¡£è‡³ `his/` ç›®å½•ã€‚
